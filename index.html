<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Star Career</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d0a0a 100%);
            color: #fff;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #8b0000;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(139, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000;
            margin-bottom: 30px;
            font-size: 2.5em;
            letter-spacing: 3px;
        }

        .creation-screen, .game-screen, .death-screen {
            display: none;
        }

        .creation-screen.active, .game-screen.active, .death-screen.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #ff6b6b;
            font-weight: bold;
            font-size: 1.1em;
        }

        input, select {
            width: 100%;
            padding: 12px;
            background: #1a1a1a;
            border: 2px solid #8b0000;
            color: #fff;
            font-size: 16px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        button {
            background: linear-gradient(135deg, #8b0000 0%, #ff0000 100%);
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px 5px;
            transition: all 0.3s;
            font-family: 'Courier New', monospace;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.5);
        }

        button:disabled {
            background: #444;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: rgba(139, 0, 0, 0.2);
            border: 2px solid #8b0000;
            padding: 20px;
            border-radius: 5px;
            height: fit-content;
        }

        .sidebar button {
            width: 100%;
            margin: 5px 0;
            padding: 12px;
            font-size: 14px;
        }

        .content-area {
            background: rgba(139, 0, 0, 0.2);
            border: 2px solid #8b0000;
            padding: 20px;
            border-radius: 5px;
            min-height: 500px;
        }

        .stats-compact {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-row {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        .stat-label {
            color: #ff6b6b;
        }

        .stat-value {
            color: #fff;
            font-weight: bold;
        }

        .header-info {
            background: rgba(139, 0, 0, 0.3);
            border: 2px solid #8b0000;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }

        .player-name {
            font-size: 2em;
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000;
            margin-bottom: 10px;
        }

        .health-bar {
            width: 100%;
            height: 20px;
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
            border: 2px solid #8b0000;
        }

        .health-fill {
            height: 100%;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .health-good { background: linear-gradient(90deg, #00aa00, #00ff00); }
        .health-medium { background: linear-gradient(90deg, #aaaa00, #ffff00); }
        .health-bad { background: linear-gradient(90deg, #aa0000, #ff0000); }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .shop-item {
            background: rgba(139, 0, 0, 0.2);
            border: 2px solid #8b0000;
            padding: 15px;
            border-radius: 5px;
        }

        .shop-item.owned {
            border-color: #00aa00;
            background: rgba(0, 139, 0, 0.2);
        }

        .concert-result {
            background: rgba(0, 139, 0, 0.3);
            border: 2px solid #00ff00;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .negative { color: #ff4444; }
        .positive { color: #00ff00; }

        .training-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé∏ ROCK STAR CAREER üé∏</h1>

        <div class="creation-screen active" id="creationScreen">
            <div class="form-group">
                <label for="playerName">Nom de sc√®ne :</label>
                <input type="text" id="playerName" placeholder="Ex: Axl Fury">
            </div>
            <div class="form-group">
                <label for="instrument">Instrument :</label>
                <select id="instrument">
                    <option value="guitare">Guitare √âlectrique</option>
                    <option value="basse">Basse</option>
                    <option value="batterie">Batterie</option>
                    <option value="chant">Chant</option>
                    <option value="clavier">Clavier</option>
                </select>
            </div>
            <button onclick="startGame()">Commencer la Carri√®re</button>
        </div>

        <div class="death-screen" id="deathScreen">
            <div style="font-size: 3em; color: #ff0000; text-shadow: 0 0 20px #ff0000; margin-bottom: 30px; text-align: center;">‚ò†Ô∏è R.I.P ‚ò†Ô∏è</div>
            <div id="deathMessage" style="font-size: 1.5em; margin-bottom: 30px; text-align: center;"></div>
            <div id="deathStats" style="margin-bottom: 30px; text-align: center;"></div>
            <button onclick="location.reload()" style="display: block; margin: 0 auto;">Nouvelle Carri√®re</button>
        </div>

        <div class="game-screen" id="gameScreen">
            <div class="header-info">
                <div class="player-name" id="displayName"></div>
                <div class="stat-label" id="displayInstrument"></div>
                <div class="stat-label" id="displayGroup">Solo</div>
                <div class="health-bar">
                    <div class="health-fill health-good" id="healthBar">100%</div>
                </div>
                <div style="color: #ff6b6b; margin-top: 10px;">
                    üïê √Çge: <span id="displayAge">18</span> ans | 
                    üíä Addiction: <span id="displayAddiction">0</span>%
                </div>
            </div>

            <div class="main-layout">
                <div class="sidebar">
                    <button onclick="showView('concert')">üé§ Concerts</button>
                    <button onclick="showView('training')">üìö Entra√Ænement</button>
                    <button onclick="showView('shop')">üõí Boutique</button>
                    <button onclick="showView('groups')">üé∏ Groupes</button>
                    <button onclick="showView('stats')">üìä Statistiques</button>
                    <button onclick="showView('lifestyle')">üíä Style de vie</button>
                </div>
                <div class="content-area" id="contentArea"></div>
            </div>
        </div>
    </div>

    <script>
        let player = {
            name: '', instrument: '', age: 18, health: 100, addiction: 0,
            money: 300, fans: 0, popularity: 0, concertsPlayed: 0, group: null,
            skills: { technique: 10, scene: 10, composition: 10, charisme: 10 },
            equipment: { instrument: 0, amplifier: 0, lights: 0, pyrotechnics: 0, soundSystem: 0, transport: 0, studio: 0 },
            trainingCooldowns: { technique: 0, scene: 0, composition: 0, charisme: 0 },
            daysWithoutDrugs: 0
        };

        let gameTime = 0;
        let currentView = 'concert';

        const groups = [
            { name: 'Les D√©butants', minPop: 0, bonus: 1.2, members: 3 },
            { name: 'Death Scream', minPop: 50, bonus: 1.5, members: 4 },
            { name: 'Iron Thunder', minPop: 150, bonus: 2, members: 5 },
            { name: 'Metal Gods', minPop: 500, bonus: 3, members: 5 },
            { name: 'Legends of Rock', minPop: 1500, bonus: 5, members: 6 }
        ];

        const shopItems = {
            instrument: [
                { level: 1, name: 'Instrument D√©butant', cost: 500, bonus: 5 },
                { level: 2, name: 'Instrument Interm√©diaire', cost: 2000, bonus: 15 },
                { level: 3, name: 'Instrument Pro', cost: 8000, bonus: 30 },
                { level: 4, name: 'Instrument L√©gendaire', cost: 25000, bonus: 50 },
                { level: 5, name: 'Instrument de Collection', cost: 100000, bonus: 80 }
            ],
            amplifier: [
                { level: 1, name: 'Ampli Basic', cost: 400, bonus: 5 },
                { level: 2, name: 'Ampli Marshall', cost: 1500, bonus: 15 },
                { level: 3, name: 'Stack Complet', cost: 6000, bonus: 25 },
                { level: 4, name: 'Ampli Stadium', cost: 20000, bonus: 45 }
            ],
            lights: [
                { level: 1, name: '√âclairages Basiques', cost: 1000, bonus: 10 },
                { level: 2, name: 'Lasers & LED', cost: 5000, bonus: 25 },
                { level: 3, name: 'Show Laser Complet', cost: 15000, bonus: 50 },
                { level: 4, name: 'Production Holographique', cost: 50000, bonus: 80 }
            ],
            pyrotechnics: [
                { level: 1, name: 'Fum√©e & √âtincelles', cost: 2000, bonus: 15 },
                { level: 2, name: 'Flammes & Explosions', cost: 8000, bonus: 35 },
                { level: 3, name: 'Pyrotechnie Compl√®te', cost: 20000, bonus: 60 },
                { level: 4, name: 'Spectacle Pyrotechnique √âpique', cost: 75000, bonus: 100 }
            ],
            soundSystem: [
                { level: 1, name: 'Sono Standard', cost: 800, bonus: 8 },
                { level: 2, name: 'Sono Pro', cost: 3000, bonus: 20 },
                { level: 3, name: 'Sono Stadium', cost: 12000, bonus: 40 },
                { level: 4, name: 'Syst√®me Audio Spatial', cost: 40000, bonus: 70 }
            ],
            transport: [
                { level: 1, name: 'Van d\'occasion', cost: 3000, bonus: 5, desc: 'Transport basique' },
                { level: 2, name: 'Tour Bus', cost: 15000, bonus: 15, desc: 'Confort en tourn√©e' },
                { level: 3, name: 'Bus Customis√©', cost: 50000, bonus: 30, desc: 'Voyage de luxe' },
                { level: 4, name: 'Jet Priv√©', cost: 500000, bonus: 100, desc: 'Style de rockstar' }
            ],
            studio: [
                { level: 1, name: 'Home Studio', cost: 5000, bonus: 10, desc: 'Enregistrement maison' },
                { level: 2, name: 'Studio Pro', cost: 25000, bonus: 30, desc: 'Qualit√© professionnelle' },
                { level: 3, name: 'Studio L√©gendaire', cost: 100000, bonus: 60, desc: 'Production de classe mondiale' }
            ]
        };

        function startGame() {
            const name = document.getElementById('playerName').value.trim();
            const instrument = document.getElementById('instrument').value;
            if (!name) { alert('Entre un nom de sc√®ne !'); return; }
            
            player.name = name;
            player.instrument = instrument;
            
            document.getElementById('creationScreen').classList.remove('active');
            document.getElementById('gameScreen').classList.add('active');
            updateDisplay();
            showView('concert');
            
            setInterval(() => {
                gameTime++;
                if (gameTime % 30 === 0) passTime();
                updateCooldowns();
            }, 1000);
        }

        function passTime() {
            player.age += 0.1;
            
            // Syst√®me d'addiction
            if (player.addiction > 0) {
                player.health -= player.addiction / 20;
                player.daysWithoutDrugs = 0;
                // L'addiction baisse tr√®s lentement
                if (Math.random() < 0.1) player.addiction = Math.max(0, player.addiction - 0.5);
            } else {
                player.daysWithoutDrugs++;
                if (player.health < 100) player.health += 0.5;
            }
            
            // Co√ªts de maintenance
            if (gameTime % 90 === 0) { // Toutes les 90 secondes
                let maintenanceCost = 0;
                for (let eq in player.equipment) {
                    if (player.equipment[eq] > 0) {
                        maintenanceCost += player.equipment[eq] * 50;
                    }
                }
                if (player.group) maintenanceCost += 200;
                player.money -= maintenanceCost;
                if (player.money < 0) {
                    player.health -= 5; // Stress financier
                }
            }
            
            // Perte de popularit√© avec le temps
            if (gameTime % 120 === 0 && player.popularity > 0) {
                player.popularity = Math.max(0, player.popularity - Math.floor(player.popularity * 0.02));
            }
            
            // Vieillissement
            if (player.age > 60 && Math.random() < 0.01) player.health -= Math.random() * 10;
            if (player.age > 70 && Math.random() < 0.05) player.health -= Math.random() * 15;
            
            // Limite de sant√© √† 0 minimum
            player.health = Math.max(0, player.health);
            
            if (player.health <= 0) gameOver();
            updateDisplay();
        }

        function updateCooldowns() {
            for (let skill in player.trainingCooldowns) {
                if (player.trainingCooldowns[skill] > 0) player.trainingCooldowns[skill]--;
            }
            if (currentView === 'training') showView('training');
        }

        function gameOver() {
            let cause = player.addiction > 70 ? 'Overdose... La drogue a eu raison de toi.' :
                       player.age > 70 ? 'Vieillesse... Tu as v√©cu ta vie √† fond.' :
                       'Sant√© d√©faillante... Le rock n\'roll a √©puis√© ton corps.';
            
            document.getElementById('deathMessage').innerHTML = `
                <div style="color: #ff0000;">${player.name} est mort √† ${Math.floor(player.age)} ans</div>
                <div style="color: #ff6b6b; margin-top: 10px;">${cause}</div>`;
            
            document.getElementById('deathStats').innerHTML = `
                <div style="color: #fff;">
                    <p>üí∞ Argent gagn√©: ${player.money} ‚Ç¨</p>
                    <p>üë• Fans totaux: ${player.fans}</p>
                    <p>üéµ Concerts jou√©s: ${player.concertsPlayed}</p>
                    <p>‚≠ê Popularit√© maximale: ${player.popularity}</p>
                    ${player.group ? `<p>üé∏ Dernier groupe: ${player.group.name}</p>` : ''}
                </div>`;
            
            document.getElementById('gameScreen').classList.remove('active');
            document.getElementById('deathScreen').classList.add('active');
        }

        function updateDisplay() {
            document.getElementById('displayName').textContent = player.name;
            document.getElementById('displayInstrument').textContent = `üé∏ ${player.instrument.charAt(0).toUpperCase() + player.instrument.slice(1)}`;
            document.getElementById('displayGroup').textContent = player.group ? `üé∏ Groupe: ${player.group.name}` : 'üé§ Solo';
            document.getElementById('displayAge').textContent = Math.floor(player.age);
            document.getElementById('displayAddiction').textContent = Math.floor(player.addiction);
            
            const healthBar = document.getElementById('healthBar');
            const healthPercent = Math.max(0, Math.min(100, player.health));
            healthBar.style.width = healthPercent + '%';
            healthBar.textContent = Math.floor(player.health) + '%';
            healthBar.className = 'health-fill ' + (healthPercent > 60 ? 'health-good' : healthPercent > 30 ? 'health-medium' : 'health-bad');
        }

        function showView(view) {
            currentView = view;
            const content = document.getElementById('contentArea');
            const views = { concert: showConcertView, training: showTrainingView, shop: showShopView, 
                          groups: showGroupsView, stats: showStatsView, lifestyle: showLifestyleView };
            views[view](content);
        }

        function showConcertView(content) {
            const equipBonus = getTotalEquipmentBonus();
            const avgSkill = (player.skills.technique + player.skills.scene + player.skills.composition + player.skills.charisme) / 4;
            
            content.innerHTML = `
                <h2 style="color: #ff0000; margin-bottom: 20px;">üé§ Concerts</h2>
                <div class="stats-compact">
                    <div class="stat-row"><span class="stat-label">üí∞ Argent</span><span class="stat-value">${player.money} ‚Ç¨</span></div>
                    <div class="stat-row"><span class="stat-label">üë• Fans</span><span class="stat-value">${player.fans}</span></div>
                    <div class="stat-row"><span class="stat-label">‚≠ê Popularit√©</span><span class="stat-value">${player.popularity}</span></div>
                    <div class="stat-row"><span class="stat-label">üéµ Concerts</span><span class="stat-value">${player.concertsPlayed}</span></div>
                </div>
                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 5px; margin: 20px 0;">
                    <p style="color: #ff6b6b;">Performance moyenne: ${Math.floor(avgSkill)}%</p>
                    <p style="color: #ff6b6b;">Bonus √©quipement: +${equipBonus}%</p>
                    ${player.group ? `<p style="color: #ff6b6b;">Bonus groupe: x${player.group.bonus}</p>` : ''}
                </div>
                <div class="action-grid">
                    <button onclick="doConcert('bar')">üç∫ Bar Local<br><small>50-100‚Ç¨</small></button>
                    <button onclick="doConcert('club')" ${player.popularity < 50 ? 'disabled' : ''}>üéµ Club<br><small>200-400‚Ç¨</small></button>
                    <button onclick="doConcert('salle')" ${player.popularity < 200 ? 'disabled' : ''}>üèõÔ∏è Grande Salle<br><small>1000-2000‚Ç¨</small></button>
                    <button onclick="doConcert('arena')" ${player.popularity < 800 ? 'disabled' : ''}>üèüÔ∏è Arena<br><small>5000-10000‚Ç¨</small></button>
                    <button onclick="doConcert('festival')" ${player.popularity < 2000 ? 'disabled' : ''}>üé™ Festival<br><small>20000-50000‚Ç¨</small></button>
                </div>
                <div id="concertResult"></div>`;
        }

        function getTotalEquipmentBonus() {
            let total = 0;
            for (let eq in player.equipment) {
                const level = player.equipment[eq];
                if (level > 0 && shopItems[eq]) total += shopItems[eq][level - 1].bonus;
            }
            return total;
        }

        function doConcert(type) {
            const avgSkill = (player.skills.technique + player.skills.scene + player.skills.composition + player.skills.charisme) / 4;
            const equipBonus = getTotalEquipmentBonus();
            
            const venues = {
                bar: { name: 'Bar Local', revenue: 75, fans: 15, difficulty: 0.3 },
                club: { name: 'Club', revenue: 300, fans: 80, difficulty: 0.5 },
                salle: { name: 'Grande Salle', revenue: 1500, fans: 300, difficulty: 0.65 },
                arena: { name: 'Arena', revenue: 7500, fans: 1500, difficulty: 0.75 },
                festival: { name: 'Festival', revenue: 35000, fans: 5000, difficulty: 0.85 }
            };
            
            const venue = venues[type];
            
            // Difficult√© bas√©e sur le lieu et comp√©tences
            const skillMultiplier = (avgSkill + equipBonus) / 100;
            const successThreshold = venue.difficulty;
            const success = skillMultiplier > successThreshold && Math.random() < (skillMultiplier - successThreshold + 0.3);
            
            // Qualit√© de la performance
            let quality = Math.min(1, skillMultiplier * (0.7 + Math.random() * 0.3));
            
            // P√©nalit√© de sant√© et addiction
            if (player.health < 50) quality *= 0.7;
            if (player.addiction > 50) quality *= 0.8;
            
            let revenue = Math.floor(venue.revenue * quality);
            let newFans = Math.floor(venue.fans * quality);
            
            if (player.group) {
                revenue = Math.floor(revenue * player.group.bonus);
                newFans = Math.floor(newFans * player.group.bonus);
            }
            
            // √âchec critique
            if (!success) {
                revenue = Math.floor(revenue * 0.3);
                newFans = Math.floor(newFans * 0.2);
                player.popularity = Math.max(0, player.popularity - Math.floor(newFans / 5));
            }
            
            player.money += revenue;
            player.fans += newFans;
            player.popularity += Math.floor(newFans / 10);
            player.concertsPlayed++;
            
            // Co√ªt en sant√© augmente avec la difficult√© du concert
            const healthCost = Math.floor(Math.random() * 3) + 1 + Math.floor(venue.difficulty * 5);
            player.health -= healthCost;
            player.health = Math.max(0, player.health);
            
            document.getElementById('concertResult').innerHTML = `
                <div class="concert-result">
                    <h3 style="color: ${success ? '#00ff00' : '#ffa500'}; margin-bottom: 15px;">
                        ${success ? 'üé∏ CONCERT R√âUSSI ! üé∏' : 'üòï Concert moyen...'}
                    </h3>
                    <p><strong>Lieu:</strong> ${venue.name}</p>
                    <p><strong>Performance:</strong> ${Math.floor(quality * 100)}%</p>
                    <p class="positive"><strong>üí∞ Gains:</strong> +${revenue} ‚Ç¨</p>
                    <p class="positive"><strong>üë• Nouveaux fans:</strong> +${newFans}</p>
                    <p class="negative"><strong>‚ù§Ô∏è Sant√©:</strong> -${healthCost}%</p>
                    ${!success ? '<p class="negative"><strong>‚≠ê Popularit√©:</strong> Baisse !</p>' : ''}
                </div>`;
            
            updateDisplay();
            showView('concert');
        }

        function showTrainingView(content) {
            const skills = [
                { key: 'technique', name: 'Technique', icon: 'üé∏', effect: 'Am√©liore la qualit√© des concerts' },
                { key: 'scene', name: 'Pr√©sence Sc√©nique', icon: 'üî•', effect: 'Augmente l\'impact sur les fans' },
                { key: 'composition', name: 'Composition', icon: 'üéµ', effect: 'Permet de meilleures performances' },
                { key: 'charisme', name: 'Charisme', icon: '‚≠ê', effect: 'Facilite l\'entr√©e dans les groupes' }
            ];
            
            content.innerHTML = `
                <h2 style="color: #ff0000; margin-bottom: 20px;">üìö Entra√Ænement</h2>
                <p style="color: #ff6b6b; margin-bottom: 20px;">Am√©liore tes comp√©tences pour devenir une l√©gende ! Cooldown: 60 secondes</p>
                <div class="training-grid">
                    ${skills.map(skill => {
                        const cost = Math.floor(100 + player.skills[skill.key] * 5);
                        const canTrain = player.trainingCooldowns[skill.key] === 0 && player.money >= cost && player.skills[skill.key] < 100;
                        return `
                            <div style="background: rgba(139, 0, 0, 0.2); border: 2px solid #8b0000; padding: 15px; border-radius: 5px;">
                                <div style="font-size: 1.5em; margin-bottom: 10px;">${skill.icon}</div>
                                <div style="color: #ff0000; font-weight: bold; margin-bottom: 5px;">${skill.name}</div>
                                <div style="color: #ff6b6b; font-size: 0.9em; margin-bottom: 10px;">${skill.effect}</div>
                                <div style="color: #fff; margin-bottom: 10px;">Niveau: ${player.skills[skill.key]}/100</div>
                                <div class="health-bar" style="height: 10px;">
                                    <div class="health-fill health-good" style="width: ${player.skills[skill.key]}%"></div>
                                </div>
                                ${player.trainingCooldowns[skill.key] > 0 ? 
                                    `<div style="color: #ffa500; font-size: 0.9em; margin-top: 5px;">‚è≥ ${player.trainingCooldowns[skill.key]}s</div>` :
                                    `<button onclick="trainSkill('${skill.key}')" ${!canTrain ? 'disabled' : ''}>S'entra√Æner (${cost} ‚Ç¨)</button>`
                                }
                            </div>`;
                    }).join('')}
                </div>`;
        }

        function trainSkill(skill) {
            const cost = Math.floor(100 + player.skills[skill] * 5);
            if (player.money < cost || player.trainingCooldowns[skill] > 0) return;
            
            player.money -= cost;
            const gain = Math.floor(Math.random() * 8) + 5;
            player.skills[skill] = Math.min(100, player.skills[skill] + gain);
            player.trainingCooldowns[skill] = 60;
            player.health -= 2;
            
            updateDisplay();
            showView('training');
        }

        function showShopView(content) {
            const categories = {
                instrument: 'Instruments', amplifier: 'Amplificateurs', lights: '√âclairages',
                pyrotechnics: 'Pyrotechnie', soundSystem: 'Sonorisation', transport: 'Transport', studio: 'Studio'
            };
            
            let html = `<h2 style="color: #ff0000; margin-bottom: 20px;">üõí Boutique d'√âquipement</h2>
                       <p style="color: #ff6b6b; margin-bottom: 20px;">üí∞ Argent: ${player.money} ‚Ç¨</p>
                       <p style="color: #ffa500; margin-bottom: 20px;">‚ö†Ô∏è Co√ªts de maintenance: ${calculateMaintenance()} ‚Ç¨ toutes les 90 secondes</p>`;
            
            for (let category in shopItems) {
                html += `<h3 style="color: #ff6b6b; margin: 20px 0 10px 0;">${categories[category]}</h3><div class="shop-grid">`;
                shopItems[category].forEach(item => {
                    const owned = player.equipment[category] >= item.level;
                    const canBuy = player.money >= item.cost && player.equipment[category] === item.level - 1;
                    html += `
                        <div class="shop-item ${owned ? 'owned' : ''}">
                            <div style="color: #ff0000; font-weight: bold; font-size: 1.2em; margin-bottom: 10px;">${item.name}</div>
                            ${item.desc ? `<div style="color: #ff6b6b; margin: 5px 0; font-size: 0.85em; font-style: italic;">${item.desc}</div>` : ''}
                            <div style="color: #ff6b6b; margin: 5px 0; font-size: 0.9em;">Bonus: +${item.bonus}%</div>
                            <div style="color: #ffa500; margin: 5px 0;">Prix: ${item.cost} ‚Ç¨</div>
                            <div style="color: #ff9999; margin: 5px 0; font-size: 0.85em;">Maintenance: ${item.level * 50} ‚Ç¨</div>
                            ${owned ? '<div style="color: #00ff00; font-weight: bold;">‚úì POSS√âD√â</div>' :
                              `<button onclick="buyEquipment('${category}', ${item.level})" ${!canBuy ? 'disabled' : ''}>Acheter</button>`}
                        </div>`;
                });
                html += '</div>';
            }
            content.innerHTML = html;
        }

        function calculateMaintenance() {
            let cost = 0;
            for (let eq in player.equipment) {
                if (player.equipment[eq] > 0) cost += player.equipment[eq] * 50;
            }
            if (player.group) cost += 200;
            return cost;
        }

        function buyEquipment(category, level) {
            const item = shopItems[category][level - 1];
            if (player.money < item.cost || player.equipment[category] !== level - 1) return;
            
            player.money -= item.cost;
            player.equipment[category] = level;
            updateDisplay();
            showView('shop');
        }

        function showGroupsView(content) {
            content.innerHTML = `
                <h2 style="color: #ff0000; margin-bottom: 20px;">üé∏ Groupes Disponibles</h2>
                <p style="color: #ff6b6b; margin-bottom: 20px;">Rejoins un groupe pour multiplier tes gains !</p>
                ${player.group ? `<div style="background: rgba(0, 139, 0, 0.3); border: 2px solid #00ff00; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
                    <h3 style="color: #00ff00;">Groupe actuel: ${player.group.name}</h3>
                    <p style="color: #fff;">Bonus: x${player.group.bonus} | Membres: ${player.group.members}</p>
                    <button onclick="leaveGroup()">Quitter le groupe</button>
                </div>` : ''}
                <div class="shop-grid">
                    ${groups.map(group => {
                        const canJoin = player.popularity >= group.minPop && (!player.group || player.group.name !== group.name);
                        return `
                            <div class="shop-item ${player.group?.name === group.name ? 'owned' : ''}">
                                <div style="color: #ff0000; font-weight: bold; font-size: 1.2em; margin-bottom: 10px;">${group.name}</div>
                                <div style="color: #ff6b6b; margin: 5px 0;">Membres: ${group.members}</div>
                                <div style="color: #ffa500; margin: 5px 0;">Bonus gains: x${group.bonus}</div>
                                <div style="color: #ff6b6b; margin: 5px 0; font-size: 0.9em;">Popularit√© requise: ${group.minPop}</div>
                                ${player.group?.name === group.name ? '<div style="color: #00ff00; font-weight: bold;">‚úì MEMBRE ACTUEL</div>' :
                                  `<button onclick="joinGroup(${groups.indexOf(group)})" ${!canJoin ? 'disabled' : ''}>Rejoindre</button>`}
                            </div>`;
                    }).join('')}
                </div>`;
        }

        function joinGroup(index) {
            const group = groups[index];
            if (player.popularity < group.minPop) return;
            player.group = group;
            updateDisplay();
            showView('groups');
        }

        function leaveGroup() {
            player.group = null;
            updateDisplay();
            showView('groups');
        }

        function showStatsView(content) {
            content.innerHTML = `
                <h2 style="color: #ff0000; margin-bottom: 20px;">üìä Statistiques Compl√®tes</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h3 style="color: #ff6b6b; margin-bottom: 15px;">Informations G√©n√©rales</h3>
                        <div class="stat-row"><span class="stat-label">Nom</span><span class="stat-value">${player.name}</span></div>
                        <div class="stat-row"><span class="stat-label">Instrument</span><span class="stat-value">${player.instrument}</span></div>
                        <div class="stat-row"><span class="stat-label">√Çge</span><span class="stat-value">${Math.floor(player.age)} ans</span></div>
                        <div class="stat-row"><span class="stat-label">Sant√©</span><span class="stat-value">${Math.floor(player.health)}%</span></div>
                        <div class="stat-row"><span class="stat-label">Addiction</span><span class="stat-value">${Math.floor(player.addiction)}%</span></div>
                        <div class="stat-row"><span class="stat-label">Groupe</span><span class="stat-value">${player.group ? player.group.name : 'Solo'}</span></div>
                    </div>
                    <div>
                        <h3 style="color: #ff6b6b; margin-bottom: 15px;">Carri√®re</h3>
                        <div class="stat-row"><span class="stat-label">Argent</span><span class="stat-value">${player.money} ‚Ç¨</span></div>
                        <div class="stat-row"><span class="stat-label">Fans</span><span class="stat-value">${player.fans}</span></div>
                        <div class="stat-row"><span class="stat-label">Popularit√©</span><span class="stat-value">${player.popularity}</span></div>
                        <div class="stat-row"><span class="stat-label">Concerts jou√©s</span><span class="stat-value">${player.concertsPlayed}</span></div>
                        <div class="stat-row"><span class="stat-label">Jours sans drogue</span><span class="stat-value">${player.daysWithoutDrugs}</span></div>
                    </div>
                </div>
                <h3 style="color: #ff6b6b; margin: 20px 0 15px 0;">Comp√©tences</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    ${Object.entries(player.skills).map(([skill, value]) => `
                        <div>
                            <div style="color: #fff; margin-bottom: 5px;">${skill.charAt(0).toUpperCase() + skill.slice(1)}: ${value}/100</div>
                            <div class="health-bar" style="height: 15px;">
                                <div class="health-fill health-good" style="width: ${value}%">${value}%</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                <h3 style="color: #ff6b6b; margin: 20px 0 15px 0;">√âquipement (Bonus total: +${getTotalEquipmentBonus()}%)</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    ${Object.entries(player.equipment).map(([eq, level]) => `
                        <div class="stat-row">
                            <span class="stat-label">${eq.charAt(0).toUpperCase() + eq.slice(1)}</span>
                            <span class="stat-value">Niveau ${level}</span>
                        </div>
                    `).join('')}
                </div>`;
        }

        function showLifestyleView(content) {
            content.innerHTML = `
                <h2 style="color: #ff0000; margin-bottom: 20px;">üíä Style de Vie Rock'n'Roll</h2>
                <div style="background: rgba(255, 0, 0, 0.2); border: 2px solid #ff0000; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
                    <h3 style="color: #ff0000; margin-bottom: 15px;">‚ö†Ô∏è ATTENTION ‚ö†Ô∏è</h3>
                    <p style="color: #ff6b6b;">Les substances peuvent booster temporairement tes performances, mais cr√©ent une addiction mortelle.</p>
                    <p style="color: #ffa500; margin-top: 10px;">Addiction actuelle: ${Math.floor(player.addiction)}%</p>
                    <p style="color: #00ff00;">Jours sans drogue: ${player.daysWithoutDrugs}</p>
                </div>
                <div class="action-grid">
                    <button onclick="takeDrugs()" ${player.health < 20 ? 'disabled' : ''}>
                        üíä Prendre des substances<br>
                        <small>+20% comp√©tences temporaires</small><br>
                        <small style="color: #ff4444;">+10% addiction, -5% sant√©</small>
                    </button>
                    <button onclick="rehabilitation()" ${player.money < 5000 || player.addiction < 20 ? 'disabled' : ''}>
                        üè• Cure de d√©sintoxication<br>
                        <small>5000 ‚Ç¨</small><br>
                        <small style="color: #00ff00;">-50% addiction</small>
                    </button>
                    <button onclick="rest()">
                        üò¥ Se reposer<br>
                        <small style="color: #00ff00;">+5% sant√©</small><br>
                        <small>Temps: 30 secondes</small>
                    </button>
                    <button onclick="party()" ${player.money < 500 ? 'disabled' : ''}>
                        üéâ Faire la f√™te<br>
                        <small>500 ‚Ç¨</small><br>
                        <small>+50 fans, -3% sant√©</small>
                    </button>
                </div>`;
        }

        function takeDrugs() {
            if (player.health < 20) return;
            player.addiction += 10;
            player.health -= 5;
            for (let skill in player.skills) {
                player.skills[skill] = Math.min(100, player.skills[skill] + 20);
            }
            setTimeout(() => {
                for (let skill in player.skills) {
                    player.skills[skill] = Math.max(10, player.skills[skill] - 20);
                }
            }, 120000);
            updateDisplay();
            showView('lifestyle');
        }

        function rehabilitation() {
            if (player.money < 5000 || player.addiction < 20) return;
            player.money -= 5000;
            player.addiction = Math.max(0, player.addiction - 50);
            updateDisplay();
            showView('lifestyle');
        }

        function rest() {
            player.health = Math.min(100, player.health + 5);
            updateDisplay();
            showView('lifestyle');
        }

        function party() {
            if (player.money < 500) return;
            player.money -= 500;
            player.fans += 50;
            player.health -= 3;
            updateDisplay();
            showView('lifestyle');
        }
    </script>
</body>
</html>